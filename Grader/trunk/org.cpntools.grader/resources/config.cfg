[matcher]
-100.0: declaration-preservation,globref

[tests]
-100.0: declaration-preservation,globref
-100.0: interface-preservation,addpages=false,initmark=true,subset=deliveryservice
0.036: btl,repeats=2,name="Accept 10 Orders",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (10 * (--> Order) -> (--> Order) => failure) &
	+ (@(!reject)) &
	+ (true ---> [|Received_Packages| = 10 & |Returns| = 0]) &
	+ (10 * (--> Finish_Order))
0.036: btl,repeats=2,name="Reject 10 Orders",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (Order := "10`(\"Bob\",A,\"Book\")") &
	+ (@(!order & !accept)) &
	+ ((--> Finish_Order) => false) &
	+ (true ---> [|Returns| = 10 & |Received_Packages| = 0])
0.036: btl,repeats=2,name="30 Random Orders",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (30 * (--> Order) -> (--> Order) => failure) &
	+ (true ---> [|Received_Packages| + |Returns| = 30])
0.036: btl,repeats=2,name="3 Rejects lead to Return (for 10 packages)",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (Order := "10`(\"Bob\",A,\"Book\")") &
	+ (@(!order & !accept)) &
	+ [10 * ((((((* !Reject -> Reject) -> * !Reject) -> Reject) -> * !Reject) -> Reject) -> * (!Reject & !Accept))] &
	+ [(--> Receive) => false] &
	+ ((10 * (--> Handle_Return)) -> (--> Handle_Return) => failure)
0.036: btl,anti,repeats=2,name="4 Rejects impossible (negative score when 4 Rejects)",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (Order := "10`(\"Bob\",A,\"Book\")") &
	+ (@(!order & !accept)) &
	+ [10 * ((((((((* !Reject -> Reject) -> * !Reject) -> Reject) -> * !Reject) -> Reject) -> * !Reject) -> Reject) -> * (!Reject & !Accept))] &
	+ [(--> Receive) => false] &
	+ ((10 * (--> Handle_Return)) -> (--> Handle_Return) => failure)
0.036: btl,repeats=2,name="Packet to Depot after Reject",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (1 * (--> Order) -> (--> Order) => failure) &
	+ ((--> Accept) => failure) &
	+ (((--> Reject) => !Reject) -> [|Offer| = 0])
0.036: btl,repeats=2,name="Only two cars of capacity 5",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ [|Reject| + |Offer| + |Accept| < 11] &
	+ (30 * (--> Order) -> (--> Order) => failure) &
	+ (true ---> [|Received_Packages| + |Returns| = 30])
0.036: btl,repeats=2,name="Accept 10 orders in time",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (Shipment := "10`(A,(1,\"Bob\",\"Book\"))@0.0") &
	+ (@(!order & !reject)) &
	+ (10*(--> ([time >= 230 & time <= 255] & accept))) &
	+ (--> ([  time = 255 && (|Offer| + |Reject| + |Accept| + |Delivery| = 0) ]))
0.036: btl,repeats=2,name="Timeout and partial shipment",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (Shipment := "1`(A,(1,\"Bob\",\"Book\"))@0.0") &
	+ (@(!order & !reject)) &
	+ (--> [|offer| = 0 && time < 3030 && time >= 230]--> [|offer| > 0 && time >= 3030] --> [|offer| = 0 && time > 3035])
0.036: btl,repeats=2,name="Accept 20 orders in time (exact)",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (Shipment := "20`(A,(1,\"Bob\",\"Book\"))@0.0") &
	+ (@(!order & !reject)) &
	+ (10*(--> ([time >= 230 & time <= 255] & [accept]))) &
	+ (--> ([  time = 255 && (|Offer| + |Reject| + |Accept| + |Delivery| = 0) ])) &
	+ (10*(--> ([time >= 1115 & time <= 1140] & [accept]))) &
	+ (--> ([  time = 1140 && (|Offer| + |Reject| + |Accept| + |Delivery| = 0) ]))
0.036: btl,repeats=2,name="11 packets delivered: first without timeout, last with",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ (Shipment := "11`(A,(1,\"Bob\",\"Book\"))@0.0") &
	+ (@(!order & !reject)) &
	+ (10*(--> ([time >= 230 & time <= 255] & [accept]))) &
	+ (--> ([  time = 255 && (|Offer| + |Reject| + |Accept| + |Delivery| = 0) ])) &
	+ (--> ([(time >= 3435 & time <= 3440) | (time >= 3915 & time <= 3920)] & [accept])) &
	+ (--> ([  time = 3440 && (|Offer| + |Reject| + |Accept| + |Delivery| = 0) ]))
0.036: btl,repeats=2,name="First reject, then accept (10 Packets), checking pause of car",test=
	+ (attempts := "3") &
	+ (capacity := "5") &
	+ Shipment:="10`(A,(1,\"Ann\",\"\"))@0.0" &
	+ (@(!order)) &
	+ (@((time >= 230 & time <= 255) | !reject)) &
	+ (10*(--> ([time >= 230 & time <= 255] & [Reject]))) &
	+ (@(time > 255 | !accept)) &
	+ (10*(--> ([(time >= 1115 & time <= 1140) | (time >= 1035 & time <= 1060) | (time >= 1595 & time <= 1620)] & [Accept]))) &
	+ (--> ([  (time = 1140 && (|Offer| + |Reject| + |Accept| + |Delivery| = 0)) | (time = 1060 && (|Offer| + |Reject| + |Accept| + |Delivery| = 0)) | (time = 1620 && (|Offer| + |Reject| + |Accept| + |Delivery| = 0)) ]))
